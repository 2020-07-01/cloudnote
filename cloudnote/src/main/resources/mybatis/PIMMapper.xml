<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.mapper.PIMMapper">

    <resultMap id="baseMap" type="com.entity.PIM">
        <id column="PIM_id" property="PIMId" jdbcType="INTEGER"/>
        <id column="account_id" property="accountId" jdbcType="INTEGER"/>
        <result column="sex" property="sex" jdbcType="VARCHAR"/>
        <result column="province" property="province" jdbcType="VARCHAR"/>
        <result column="city" property="city" jdbcType="VARCHAR"/>
        <result column="remark" property="remark" jdbcType="VARCHAR"/>
        <result column="head_image_url" property="headImageUrl" jdbcType="VARCHAR"/>
    </resultMap>

    <sql id="base_sql">
        PIM_id,account_id,head_image_url,province,sex,city,remark
    </sql>

    <insert id="inertPIM" parameterType="com.entity.PIM">
        insert into account (email,account_name,account_password,create_time)
        value ( #{email,jdbcType=VARCHAR},#{accountName,jdbcType=VARCHAR},#{accountPassword,jdbcType=VARCHAR},now())
    </insert>


    <!-- <select id="findAccountByCondition" parameterType="com.entity.Condition" resultMap="baseMap">
         select
         <include refid="base_sql"/>
         from account
         where
         1=1
         <if test="accountName != '' and accountName != null">
             and account_name = #{accountName,jdbcType=VARCHAR}
         </if>
         <if test="email != '' and email != null">
             and email = #{email,jdbcType=VARCHAR}
         </if>
         <if test="phone != '' and phone != null">
             and phone = #{phone,jdbcType=VARCHAR}
         </if>
         <if test="accountPassword != '' and accountPassword != null">
             and account_password = #{accountPassword,jdbcType=VARCHAR}
         </if>
     </select>-->

    <update id="updatePIM" parameterType="com.entity.PIM">
        update pim
        <set>
            <if test=" sex!= null and sex != ''">
                sex = #{sex,jdbcType=VARCHAR},
            </if>
            <if test="headImageUrl != null and headImageUrl != ''">
                head_image_url = #{headImageUrl,jdbcType=VARCHAR},
            </if>
            <if test="province != null and province != ''">
                province = #{province,jdbcType=VARCHAR},
            </if>
            <if test="city != null and city != ''">
                city = #{city,jdbcType=VARCHAR},
            </if>
            <if test="remark != null and remark != ''">
                remark = #{remark,jdbcType=VARCHAR},
            </if>
            update_time = now()
        </set>
        where account_id = #{accountId,jdbcType=INTEGER}
    </update>

</mapper>