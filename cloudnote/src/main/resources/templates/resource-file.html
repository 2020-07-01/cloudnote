<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset='utf-8'>
    <title>主页</title>

    <link rel='stylesheet' media='screen' href="../static/layui-v2.5.5/layui/css/layui.css" type='text/css'>
    <script src="../static/layui-v2.5.5/layui/layui.js"></script>
    <script src="../static/jquery-3.4.1.min.js"></script>

    <style>
        .layui-side.layui-bg-black {
            width: 100px;
        }

        .layui-table-grid-down {
            display: none;
        }

        .layui-nav-tree {
            width: 100px;
        }

        .layui-body {
            left: 100px;
        }

        .layui-footer1 {
            position: fixed;
            left: 100px;
            right: 0;
            bottom: 0;
            height: 35px;
            line-height: 35px;
            padding: 0 15px;
        }

        .layui-tab-title li {
            display: block;
        }

        .layui-tab-title {
            float: left;
            width: 200px;
        }


    </style>
</head>

<body>
<!--顶部导航栏-->
<div class="layui-layout layui-layout-admin">

    <div class="layui-header">

        <div><a class="layui-logo" id="cloudNote" href="/to_index">云笔记平台</a></div>

        <div class=" layui-nav layui-layout-left">
            <li class="layui-nav-item"><a id="my-note" href="/">我的笔记</a></li>
            <li class="layui-nav-item"><a id="my-event" href="/to_task">我的活动</a></li>
            <li class="layui-nav-item"><a id="my-source" href="">我的资源</a></li>
        </div>

        <ul class="layui-nav layui-layout-right">

            <li class="layui-nav-item">
                <div class="layui-input-inline">
                    <input type="text" id="key" name="key" required lay-verify="required"
                           autocomplete="off" class="layui-input"
                           style="width: 100%; height: 30px;line-height: 30px;padding:0 10px;margin-top: 2px;">
                </div>

                <div class="layui-input-inline" style="margin-right: 15px; ">

                    <button class="layui-btn layui-btn-primary layui-btn-sm" lay-filter="selectNoteByKey">搜索</button>

                </div>
            </li>
            <li class="layui-nav-item">
                <a href="javascript:;">
                    <img src="http://t.cn/RCzsdCq" class="layui-nav-img">
                    admin
                </a>
                <dl class="layui-nav-child">
                    <dd><a href="">个人信息</a></dd>
                    <dd><a href="">账号信息</a></dd>
                    <dd><a href="/to_editPassword">修改密码</a></dd>
                    <dd><a href="">意见反馈</a></dd>
                    <dd><a href="">注销登录</a></dd>
                </dl>
            </li>
        </ul>
    </div>

    <div class="layui-side layui-bg-black">
        <div class="layui-side-scroll">

            <ul class="layui-nav layui-nav-tree" lay-filter="test">
                <li class="layui-nav-item layui-nav-itemed">
                    <a class="" href="javascript:;">笔记</a>
                    <dl class="layui-nav-child">
                        <dd><a href="javascript:;">学习</a></dd>
                        <dd><a href="javascript:;">工作</a></dd>
                        <dd><a href="javascript:;">生活</a></dd>
                        <dd><a href="javascript:;">旅游</a></dd>
                        <dd><a href="javascript:;">随笔</a></dd>
                    </dl>
                </li>

            </ul>

            <ul class="layui-nav layui-nav-tree">
                <li class="layui-nav-item">
                    <a href="javascript:;">回收站</a>
                    <dl class="layui-nav-child" style="text-align: left">
                        <dd><a href="javascript:;">全部恢复</a></dd>
                        <dd><a href="javascript:;">全部清空</a></dd>
                        <dd><a href="javascript:;">查看全部</a></dd>
                    </dl>
                </li>
            </ul>

            <ul class="layui-nav layui-nav-tree">
                <li class="layui-nav-item">
                    <a href="javascript:;">资源</a>
                    <dl class="layui-nav-child">
                        <dd><a href="/to_resource-image">图片</a></dd>
                        <dd><a href="javascript:;">视频</a></dd>
                        <dd><a href="javascript:;">文档</a></dd>
                    </dl>
                </li>
            </ul>

            <ul class="layui-nav layui-nav-tree">
                <li class="layui-nav-item">
                    <a href="javascript:;">任务</a>
                    <dl class="layui-nav-child">
                        <dd><a href="javascript:;">全部恢复</a></dd>
                        <dd><a href="javascript:;">全部清空</a></dd>
                        <dd><a href="javascript:;">查看全部</a></dd>
                    </dl>
                </li>
            </ul>

        </div>
    </div>

    <div class="layui-body">

        <div class="layui-container">
            <div class="layui-row layui-col-space10">
                <div class="layui-col-xs3">
                    <div class="grid-demo grid-demo-bg1">


                        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
                            <legend>上传普通图片搜索框</legend>
                        </fieldset>
                        <hr>

                        <!--图片连接区域-->
                        <div>
                            <table class="layui-hide" id="table" lay-filter="test"></table>
                        </div>
                        <!--
                                                &lt;!&ndash;拖动添加区域&ndash;&gt;
                                                <div class="layui-upload-drag" id="test10">
                                                    <i class="layui-icon"></i>
                                                    <p>点击上传，或将文件拖拽到此处</p>
                                                    <div class="layui-hide" id="uploadDemoView">
                                                        <hr>
                                                        <img src="" alt="上传成功后渲染" style="max-width: 196px">
                                                    </div>
                                                </div>-->

                    </div>
                </div>

                <div class="layui-col-xs9">
                    <div class="grid-demo">

                        <!--设置图片标题-->
                        <h2>显示图片标题</h2>
                        <hr>
                        <div class="layui-upload">

                            <button type="button" class="layui-btn" id="file"><i class="layui-icon"></i>上传文件</button>

                            <div class="layui-upload-list">
                                <img class="layui-upload-img" id="preview-image"
                                     style="width: auto;height: auto;max-width: 100%;max-height: 100%;">
                                <p id="demoText"></p>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

    </div>
    <div class="layui-footer1 layui-bg-black">
        © layui.com - 底部固定区域
    </div>
</div>
</body>

<script th:inline="none">

    //预先加载模块
    layui.use(['element', 'form', 'layer', 'upload','table'], function () {
        var form = layui.form;
        var layer = layui.layer;
        var upload = layui.upload;
        var element = layui.element;
        var table = layui.table;


        //获取token
        var token = sessionStorage.getItem("token");

        //普通图片上传
        var uploadInit = upload.render({
            elem: '#file'
            ,headers:{token: token}
            , url: 'http://localhost:8080/file/upload-file'
            , accept: 'file'
            , done: function (res) {
                if (res.code = 0) {
                    //成功之后添加数据
                    return layer.msg('上传失败');
                } else {
                    return layer.msg('上传成功');
                }
            }
            , error: function () {
                //演示失败状态，并实现重传
                /* var demoText = $('#demoText');
                 demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-xs demo-reload">重试</a>');
                 demoText.find('.demo-reload').on('click', function () {
                     uploadInst.upload();
                 });*/
            }
        });


        /*  //拖拽上传
          upload.render({
              elem: '#test10'
              ,url: 'https://httpbin.org/post' //改成您自己的上传接口
              ,done: function(res){
                  layer.msg('上传成功');
                  layui.$('#uploadDemoView').removeClass('layui-hide').find('img').attr('src', res.files.file);
                  console.log(res)
              }
          });*/

        //加载table
        var table_reload = table.render({
            elem: '#table'
            ,where: {token: token}//传递token到服务端
            //,url: 'http://localhost:8080/note/note_slist'
            ,height: 312
            ,page: false//开启分页
            ,cols: [[ //表头
                {field: 'id', title: 'ID', width:80, sort: true, fixed: 'left'}
                ,{field: 'username', title: '用户名', width:80}

            ]]
        });

        /* //监听行单击事件（双击事件为：rowDouble）
         table.on('row(test)', function(obj){
             var data = obj.data;

             layer.alert(JSON.stringify(data), {
                 title: '当前行数据：'
             });

             //标注选中样式
             obj.tr.addClass('layui-table-click').siblings().removeClass('layui-table-click');
         });*/


    })

</script>

</html>