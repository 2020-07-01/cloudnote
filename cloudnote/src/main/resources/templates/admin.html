<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset='utf-8'>
    <title>cloudNote</title>
    <link rel='stylesheet' media='screen' href="../static/layui-v2.5.5/layui/css/layui.css" type='text/css'>
    <script src="../static/layui-v2.5.5/layui/layui.js"></script>
    <style>

        .note-title {
            border: none;
        }

        .layui-container {
            width: 100%;
            height: 100%;
            padding: 0 0;
            overflow: hidden;
        }

        .layui-table, .layui-table-view {
            margin: 0 0;
        }

        .layui-form-item {
        }

    </style>
</head>

<body>
<!--顶部导航栏-->
<div class="layui-layout layui-layout-admin">

    <div class="layui-header">

        <div><a class="layui-logo" id="cloudNote" href="/to_index">云笔记平台</a></div>

        <ul class="layui-nav layui-layout-right">

            <li class="layui-nav-item">
                <a href="javascript:;">
                    <img src="http://t.cn/RCzsdCq" class="layui-nav-img">
                    admin
                </a>
                <dl class="layui-nav-child">
                    <dd><a href="/admin"><i class="layui-icon layui-icon-close"></i> 注销登录</a></dd>
                </dl>
            </li>
        </ul>
    </div>

    <div class="layui-side layui-bg-black">
        <div class="layui-side-scroll" style="text-align: left;padding-left: 8px">
            <ul class="layui-nav layui-nav-tree" lay-filter="select-type">
                <li class="layui-nav-item">
                    <a><i class="layui-icon layui-icon-edit"></i> 我的笔记</a>
                    <dl class="layui-nav-child" style="padding-left: 15px">
                        <dd><a href="#" id="cleanEditSpace"><i class="layui-icon layui-icon-edit"></i> 创建笔记</a></dd>
                        <dd><a href="#" id="all"><i class="layui-icon layui-icon-form"></i> 查看</a></dd>
                        <dd><a href="#" id="starList"><i class="layui-icon layui-icon-star-fill"> 收藏夹</i></a></dd>
                    </dl>
                </li>
            </ul>

            <ul class="layui-nav layui-nav-tree">
                <li class="layui-nav-item">
                    <a href="javascript:;"><i class="layui-icon layui-icon-component"></i> 我的资源</a>
                    <dl class="layui-nav-child" style="padding-left: 15px">
                        <dd><a href="/image_page"><i class="layui-icon layui-icon-picture"></i> 图片</a></dd>
                        <dd><a href="/file_page"><i class="layui-icon layui-icon-file-b"></i> 文档</a></dd>
                    </dl>
                </li>
            </ul>

            <ul class="layui-nav layui-nav-tree">
                <li class="layui-nav-item">
                    <a href="javascript:;"><i class="layui-icon layui-icon-date"></i> 我的日程</a>
                    <dl class="layui-nav-child" style="padding-left: 15px">
                        <dd><a href="/to_schedule_page"><i class="layui-icon layui-icon-form"></i> 查看</a>
                    </dl>
                </li>
            </ul>

            <ul class="layui-nav layui-nav-tree">
                <li class="layui-nav-item">
                    <a href="javascript:;"><i class="layui-icon layui-icon-delete"></i> 回收站</a>
                    <dl class="layui-nav-child" style="padding-left: 15px">
                        <dd><a href="javascript:;"><i class="layui-icon layui-icon-home"></i> 全部恢复</a></dd>
                        <dd><a href="javascript:;"><i class="layui-icon layui-icon-home"></i> 全部清空</a></dd>
                        <dd><a href="javascript:;"><i class="layui-icon layui-icon-home"></i> 查看全部</a></dd>
                    </dl>
                </li>
            </ul>

            <ul class="layui-nav layui-nav-tree">
                <li class="layui-nav-item">
                    <a href="javascript:;"><i class="layui-icon layui-icon-set"></i> 系统设置</a>
                    <dl class="layui-nav-child" style="padding-left: 15px">
                        <dd><a href="information"><i class="layui-icon layui-icon-user"></i> 账号设置</a></dd>
                        <dd><a href="/admin"><i class="layui-icon layui-icon-engine"></i> 后台管理</a></dd>
                        <dd><a href="#" id="logout"><i class="layui-icon layui-icon-prev"></i> 注销登录</a></dd>
                    </dl>
                </li>
            </ul>

        </div>
    </div>


    <div class="layui-body">
        <div class="layui-container">
            <!--检索条件-->
            <div class="layui-card">
                <!--       <div class="layui-card-header">卡片面板</div>-->
                <div class="layui-card-body">
                    <div class="layui-row">
                        <div class="layui-col-md3">
                            <div class="layui-form-item">
                                <div class="layui-inline">
                                    <label class="layui-form-label">登录名</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="loginname" placeholder="请输入" autocomplete="off"
                                               class="layui-input">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-md3">
                            <div class="layui-form-item">
                                <div class="layui-inline">
                                    <label class="layui-form-label">邮箱</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="email" placeholder="请输入" autocomplete="off"
                                               class="layui-input">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-md3">
                            <form class="layui-form" action="post">
                                <div class="layui-inline">
                                    <label class="layui-form-label">状态</label>
                                    <div class="layui-input-block">
                                        <select name="quiz">
                                            <option value="">登录状态</option>
                                            <option value="">注销状态</option>
                                        </select>
                                    </div>
                                </div>
                            </form>
                        </div>

                        <div class="layui-col-md2 layui-col-md-offset1" >
                            <div class="layui-form-item">
                                <div class="layui-inline">
                                    <button class="layui-btn layuiadmin-btn-admin" lay-submit
                                            lay-filter="LAY-user-back-search">搜索
                                    </button>
                                    <button class="layui-btn layuiadmin-btn-admin" lay-submit
                                            lay-filter="LAY-user-back-search">重置
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="layui-row">
                <div class="layui-col-xs12">
                    <div class="grid-demo grid-demo-bg1">
                        <table class="layui-hide" id="test" lay-filter="test"></table>
                    </div>
                </div>
            </div>
        </div>

        <div class="layui-footer layui-bg-black">
            © layui.com - 底部固定区域
        </div>

    </div>

</div>
</body>

<script type="text/html" id="barDemo">
    <a class="layui-btn layui-btn-xs" lay-event="lock">锁定</a>
    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="unLock">解锁</a>

</script>

<script th:inline="none">

    //设置全局token
    var token = sessionStorage.getItem("token");

    layui.use(['table', 'element', 'form', 'layer'], function () {
        var table = layui.table;
        table.render({
            elem: '#test'
            , where: {token: token}//传递token到服务端
            , url: 'http://localhost:8080/PIM/account_list.json' //默认传递两个参
            , cellMinWidth: 80 //全局定义常规单元格的最小宽度，layui 2.2.1 新增
            , title: '用户数据表'
            , page: true
            , cols: [[
                {type: 'checkbox', fixed: 'left'}
                , {field: 'accountId', title: 'ID', width: 50, fixed: 'left', unresize: true}
                , {field: 'accountName', title: '用户名', width: 120, unresize: true}
                , {field: 'sex', title: '性别', width: 70, unresize: true}
                , {field: 'email', title: '邮箱', width: 200, unresize: true,}
                , {field: 'phone', title: '手机', width: 160, unresize: true,}
                , {field: 'zone', title: '区域', width: 100, unresize: true,}
                , {field: 'createTime', title: '加入时间', width: 160, sort: true, unresize: true}
                , {fixed: 'right', title: '操作', toolbar: '#barDemo', width: 200, unresize: true}
            ]]

        });

        //监听按钮事件
        table.on('tool(test)', function (obj) {
            var data = obj.data;
            if (obj.event === 'lock') {

            } else if (obj.event === 'unLock') {
            }
        });

        //锁定账户
        function lock() {

        }


        //解锁账户
        function unLock() {

        }


        //退出登录
        $("#logout").click(function () {
            $.ajax({
                type: "post",
                contentType: "application/json",
                dataType: 'json',
                headers: {'Content-Type': 'application/json;charset=utf8', 'token': token},
                url: "http://localhost:8080/account/logout.json",
                success: function (result) {
                    if(result.code == 1){
                        layer.msg("退出成功!")
                        window.location.href = "/login"//进入主页
                    }
                },
            })
        })
    });
</script>

</html>